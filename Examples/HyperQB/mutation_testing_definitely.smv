-- Again, model is slightly different from the one in HyperQB...
MODULE main
FROZENVAR
    mutation: boolean;
VAR
    action: 0..2;   -- 0: nop,  1: beverage, 2: fill
    beverage: 0..2; -- 0: none, 1: coffee,   2: tea
    water: 0..3;
INIT
    beverage = 0 & water = 3
TRANS
    (action = 0 & next(beverage) = 0 & next(water) = water) |
    (action = 1 & water > 0 & next(beverage) > 0 & next(water) = water - 1) |
    (action = 1 & water = 0 & next(beverage) = 0 & next(water) = water) |
    (action = 2 & water = 0 & next(beverage) = 0 & (!mutation & next(water) = 3 | mutation & next(water) < 3)) |
    (action = 2 & water > 0 & next(beverage) = 0 & next(water) = water)
